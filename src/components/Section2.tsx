"use client";

import { ChevronLeft } from "lucide-react";
import Image from "next/image";
import { useState } from "react";
import { twMerge } from "tailwind-merge";
import { ContentWrapper } from "./ContentWrapper";
import classNames from "classnames";

export const Section2 = () => {
  return (
    <ContentWrapper className="mt-6 md:mt-[150px] z-10">
      <div
        id="events"
        className="flex flex-col md:flex-row items-stretch md:items-start justify-center gap-[50px] scroll-mt-10"
      >
        <div className="bg-[#FFF9E0F2] rounded-2xl px-4 py-5 w-full md:w-[510px]">
          <div className="flex items-center justify-between">
            <div className="text-black text-[16px] md:text-[22px] font-semibold">
              ä½›æ—¥ç‚¹ç¯ã€çŒ®èŠ±ã€ç¤¼ä½›åŠŸå¾·åŠ å€
            </div>

            <Image
              src="/icons/icon-calendar.svg"
              alt="arrow-right"
              width={30}
              height={30}
              className="w-5 md:w-8"
            />
          </div>

          <Image
            src="/images/calendar-example.png"
            alt="section2-1"
            width={485}
            height={322}
            className="mt-5 w-full h-auto"
          />
        </div>

        <Events />
      </div>
    </ContentWrapper>
  );
};

const Events = () => {
  const [openedIndex, setOpenedIndex] = useState(-1);

  const handleClick = (index: number) => {
    if (openedIndex === index) {
      setOpenedIndex(-1);
    } else {
      setOpenedIndex(index);
    }
  };

  return (
    <div className="flex flex-col">
      <EventItem
        index={0}
        openedIndex={openedIndex}
        onClick={() => handleClick(0)}
        title="ğŸŸ æ”¾ç”Ÿ"
        content="æ”¾ç”Ÿä¸ä»…æ˜¯è§£æ•‘ç”Ÿå‘½ï¼Œæ›´æ˜¯åŸ¹å…»æ…ˆæ‚²å¿ƒï¼Œç§¯ç´¯ç¦æŠ¥ï¼Œå‡€åŒ–ä¸šéšœçš„æ®Šèƒœå–„è¡Œã€‚ä½›é™€æ•™å¯¼æˆ‘ä»¬ï¼Œä¸€åˆ‡ä¼—ç”Ÿçš†å…·ä½›æ€§ï¼Œçš†å¯æˆä½›ã€‚é€šè¿‡æ”¾ç”Ÿä¼šæˆ‘ä»¬è·µè¡Œä½›é™€çš„æ•™è¯²ï¼Œä¸ä¼—ç”Ÿç»“ä¸‹å–„ç¼˜ä¹Ÿä¸ºè‡ªèº«ç§¯ç´¯è§£è„±çš„èµ„ç²®æ”¾ç”Ÿç‰©å‘½éƒ½æ˜¯ç²¾å¿ƒæŒ‘é€‰ï¼Œç¡®ä¿å…¶å¥åº·å¹¶é€‚åˆæ”¾ç”Ÿç¯å¢ƒäººå‰æ—¥æ®Šèƒœï¼Œè¯šé‚€åæ–¹å–„ä¿¡ä¸€èµ·å‚ä¸æ”¾ç”Ÿä¸Šä¾›å…»ä¸‰å®ï¼Œä¸‹å¸ƒæ–½ä¸€åˆ‡ä¼—ç”Ÿï¼Œæ¶ˆé™¤ä¸€åˆ‡ä¸šéšœï¼Œå¢åŠ ä¸€åˆ‡å–„ç¼˜åŠŸå¾·ï¼Œæ‰€æ„¿çš†èƒ½æ»¡è¶³å¦‚æ„å¤ç¥¥äººäººäºº
ç¥ˆæ„¿:å¤©ä¸‹æ— ç¾ï¼Œï¼Œå¤§åœ°æ¸…å®ï¼Œå›½æ³°æ°‘å®‰ï¼Œé£è°ƒé›¨é¡ºï¼Œä¼—ç”Ÿçš†é—»ä½›æ³•ï¼Œæ·±æ©å¼€æ˜¾æ™ºæ…§ï¼Œç¦å¾·åœ†èï¼Œç¦æ…§åŒå¢ï¼Œç¦å»¶å­å­™äººäººäºº
å¦‚éœ€å‚ä¸æ”¾ç”Ÿä¼šä¼šä¼šè¿˜è¯·æå‰è”ç³»ç™»è®°â€¦.((æä¾›å§“å+æ„¿æœ›å›å‘)"
      />

      <EventItem
        index={1}
        openedIndex={openedIndex}
        onClick={() => handleClick(1)}
        title="ğŸ§§ åŒ–å¤ªå²"
        content="æ”¾ç”Ÿä¸ä»…æ˜¯è§£æ•‘ç”Ÿå‘½ï¼Œæ›´æ˜¯åŸ¹å…»æ…ˆæ‚²å¿ƒï¼Œç§¯ç´¯ç¦æŠ¥ï¼Œå‡€åŒ–ä¸šéšœçš„æ®Šèƒœå–„è¡Œã€‚ä½›é™€æ•™å¯¼æˆ‘ä»¬ï¼Œä¸€åˆ‡ä¼—ç”Ÿçš†å…·ä½›æ€§ï¼Œçš†å¯æˆä½›ã€‚é€šè¿‡æ”¾ç”Ÿä¼šæˆ‘ä»¬è·µè¡Œä½›é™€çš„æ•™è¯²ï¼Œä¸ä¼—ç”Ÿç»“ä¸‹å–„ç¼˜ä¹Ÿä¸ºè‡ªèº«ç§¯ç´¯è§£è„±çš„èµ„ç²®æ”¾ç”Ÿç‰©å‘½éƒ½æ˜¯ç²¾å¿ƒæŒ‘é€‰ï¼Œç¡®ä¿å…¶å¥åº·å¹¶é€‚åˆæ”¾ç”Ÿç¯å¢ƒäººå‰æ—¥æ®Šèƒœï¼Œè¯šé‚€åæ–¹å–„ä¿¡ä¸€èµ·å‚ä¸æ”¾ç”Ÿä¸Šä¾›å…»ä¸‰å®ï¼Œä¸‹å¸ƒæ–½ä¸€åˆ‡ä¼—ç”Ÿï¼Œæ¶ˆé™¤ä¸€åˆ‡ä¸šéšœï¼Œå¢åŠ ä¸€åˆ‡å–„ç¼˜åŠŸå¾·ï¼Œæ‰€æ„¿çš†èƒ½æ»¡è¶³å¦‚æ„å¤ç¥¥äººäººäºº
ç¥ˆæ„¿:å¤©ä¸‹æ— ç¾ï¼Œï¼Œå¤§åœ°æ¸…å®ï¼Œå›½æ³°æ°‘å®‰ï¼Œé£è°ƒé›¨é¡ºï¼Œä¼—ç”Ÿçš†é—»ä½›æ³•ï¼Œæ·±æ©å¼€æ˜¾æ™ºæ…§ï¼Œç¦å¾·åœ†èï¼Œç¦æ…§åŒå¢ï¼Œç¦å»¶å­å­™äººäººäºº
å¦‚éœ€å‚ä¸æ”¾ç”Ÿä¼šä¼šä¼šè¿˜è¯·æå‰è”ç³»ç™»è®°â€¦.((æä¾›å§“å+æ„¿æœ›å›å‘)"
      />

      <EventItem
        index={2}
        openedIndex={openedIndex}
        onClick={() => handleClick(2)}
        title="ğŸ’° è¡¥è´¢åº“"
        content="æ”¾ç”Ÿä¸ä»…æ˜¯è§£æ•‘ç”Ÿå‘½ï¼Œæ›´æ˜¯åŸ¹å…»æ…ˆæ‚²å¿ƒï¼Œç§¯ç´¯ç¦æŠ¥ï¼Œå‡€åŒ–ä¸šéšœçš„æ®Šèƒœå–„è¡Œã€‚ä½›é™€æ•™å¯¼æˆ‘ä»¬ï¼Œä¸€åˆ‡ä¼—ç”Ÿçš†å…·ä½›æ€§ï¼Œçš†å¯æˆä½›ã€‚é€šè¿‡æ”¾ç”Ÿä¼šæˆ‘ä»¬è·µè¡Œä½›é™€çš„æ•™è¯²ï¼Œä¸ä¼—ç”Ÿç»“ä¸‹å–„ç¼˜ä¹Ÿä¸ºè‡ªèº«ç§¯ç´¯è§£è„±çš„èµ„ç²®æ”¾ç”Ÿç‰©å‘½éƒ½æ˜¯ç²¾å¿ƒæŒ‘é€‰ï¼Œç¡®ä¿å…¶å¥åº·å¹¶é€‚åˆæ”¾ç”Ÿç¯å¢ƒäººå‰æ—¥æ®Šèƒœï¼Œè¯šé‚€åæ–¹å–„ä¿¡ä¸€èµ·å‚ä¸æ”¾ç”Ÿä¸Šä¾›å…»ä¸‰å®ï¼Œä¸‹å¸ƒæ–½ä¸€åˆ‡ä¼—ç”Ÿï¼Œæ¶ˆé™¤ä¸€åˆ‡ä¸šéšœï¼Œå¢åŠ ä¸€åˆ‡å–„ç¼˜åŠŸå¾·ï¼Œæ‰€æ„¿çš†èƒ½æ»¡è¶³å¦‚æ„å¤ç¥¥äººäººäºº
ç¥ˆæ„¿:å¤©ä¸‹æ— ç¾ï¼Œï¼Œå¤§åœ°æ¸…å®ï¼Œå›½æ³°æ°‘å®‰ï¼Œé£è°ƒé›¨é¡ºï¼Œä¼—ç”Ÿçš†é—»ä½›æ³•ï¼Œæ·±æ©å¼€æ˜¾æ™ºæ…§ï¼Œç¦å¾·åœ†èï¼Œç¦æ…§åŒå¢ï¼Œç¦å»¶å­å­™äººäººäºº
å¦‚éœ€å‚ä¸æ”¾ç”Ÿä¼šä¼šä¼šè¿˜è¯·æå‰è”ç³»ç™»è®°â€¦.((æä¾›å§“å+æ„¿æœ›å›å‘)"
      />

      <EventItem
        index={3}
        openedIndex={openedIndex}
        onClick={() => handleClick(3)}
        title="ğŸ¤ æ¥è´µäºº"
        content="æ”¾ç”Ÿä¸ä»…æ˜¯è§£æ•‘ç”Ÿå‘½ï¼Œæ›´æ˜¯åŸ¹å…»æ…ˆæ‚²å¿ƒï¼Œç§¯ç´¯ç¦æŠ¥ï¼Œå‡€åŒ–ä¸šéšœçš„æ®Šèƒœå–„è¡Œã€‚ä½›é™€æ•™å¯¼æˆ‘ä»¬ï¼Œä¸€åˆ‡ä¼—ç”Ÿçš†å…·ä½›æ€§ï¼Œçš†å¯æˆä½›ã€‚é€šè¿‡æ”¾ç”Ÿä¼šæˆ‘ä»¬è·µè¡Œä½›é™€çš„æ•™è¯²ï¼Œä¸ä¼—ç”Ÿç»“ä¸‹å–„ç¼˜ä¹Ÿä¸ºè‡ªèº«ç§¯ç´¯è§£è„±çš„èµ„ç²®æ”¾ç”Ÿç‰©å‘½éƒ½æ˜¯ç²¾å¿ƒæŒ‘é€‰ï¼Œç¡®ä¿å…¶å¥åº·å¹¶é€‚åˆæ”¾ç”Ÿç¯å¢ƒäººå‰æ—¥æ®Šèƒœï¼Œè¯šé‚€åæ–¹å–„ä¿¡ä¸€èµ·å‚ä¸æ”¾ç”Ÿä¸Šä¾›å…»ä¸‰å®ï¼Œä¸‹å¸ƒæ–½ä¸€åˆ‡ä¼—ç”Ÿï¼Œæ¶ˆé™¤ä¸€åˆ‡ä¸šéšœï¼Œå¢åŠ ä¸€åˆ‡å–„ç¼˜åŠŸå¾·ï¼Œæ‰€æ„¿çš†èƒ½æ»¡è¶³å¦‚æ„å¤ç¥¥äººäººäºº
ç¥ˆæ„¿:å¤©ä¸‹æ— ç¾ï¼Œï¼Œå¤§åœ°æ¸…å®ï¼Œå›½æ³°æ°‘å®‰ï¼Œé£è°ƒé›¨é¡ºï¼Œä¼—ç”Ÿçš†é—»ä½›æ³•ï¼Œæ·±æ©å¼€æ˜¾æ™ºæ…§ï¼Œç¦å¾·åœ†èï¼Œç¦æ…§åŒå¢ï¼Œç¦å»¶å­å­™äººäººäºº
å¦‚éœ€å‚ä¸æ”¾ç”Ÿä¼šä¼šä¼šè¿˜è¯·æå‰è”ç³»ç™»è®°â€¦.((æä¾›å§“å+æ„¿æœ›å›å‘)"
      />

      <EventItem
        index={4}
        openedIndex={openedIndex}
        onClick={() => handleClick(4)}
        title="ğŸ“š å­¦ä¸šé‡‘"
        content="æ”¾ç”Ÿä¸ä»…æ˜¯è§£æ•‘ç”Ÿå‘½ï¼Œæ›´æ˜¯åŸ¹å…»æ…ˆæ‚²å¿ƒï¼Œç§¯ç´¯ç¦æŠ¥ï¼Œå‡€åŒ–ä¸šéšœçš„æ®Šèƒœå–„è¡Œã€‚ä½›é™€æ•™å¯¼æˆ‘ä»¬ï¼Œä¸€åˆ‡ä¼—ç”Ÿçš†å…·ä½›æ€§ï¼Œçš†å¯æˆä½›ã€‚é€šè¿‡æ”¾ç”Ÿä¼šæˆ‘ä»¬è·µè¡Œä½›é™€çš„æ•™è¯²ï¼Œä¸ä¼—ç”Ÿç»“ä¸‹å–„ç¼˜ä¹Ÿä¸ºè‡ªèº«ç§¯ç´¯è§£è„±çš„èµ„ç²®æ”¾ç”Ÿç‰©å‘½éƒ½æ˜¯ç²¾å¿ƒæŒ‘é€‰ï¼Œç¡®ä¿å…¶å¥åº·å¹¶é€‚åˆæ”¾ç”Ÿç¯å¢ƒäººå‰æ—¥æ®Šèƒœï¼Œè¯šé‚€åæ–¹å–„ä¿¡ä¸€èµ·å‚ä¸æ”¾ç”Ÿä¸Šä¾›å…»ä¸‰å®ï¼Œä¸‹å¸ƒæ–½ä¸€åˆ‡ä¼—ç”Ÿï¼Œæ¶ˆé™¤ä¸€åˆ‡ä¸šéšœï¼Œå¢åŠ ä¸€åˆ‡å–„ç¼˜åŠŸå¾·ï¼Œæ‰€æ„¿çš†èƒ½æ»¡è¶³å¦‚æ„å¤ç¥¥äººäººäºº
ç¥ˆæ„¿:å¤©ä¸‹æ— ç¾ï¼Œï¼Œå¤§åœ°æ¸…å®ï¼Œå›½æ³°æ°‘å®‰ï¼Œé£è°ƒé›¨é¡ºï¼Œä¼—ç”Ÿçš†é—»ä½›æ³•ï¼Œæ·±æ©å¼€æ˜¾æ™ºæ…§ï¼Œç¦å¾·åœ†èï¼Œç¦æ…§åŒå¢ï¼Œç¦å»¶å­å­™äººäººäºº
å¦‚éœ€å‚ä¸æ”¾ç”Ÿä¼šä¼šä¼šè¿˜è¯·æå‰è”ç³»ç™»è®°â€¦.((æä¾›å§“å+æ„¿æœ›å›å‘)"
      />

      <EventItem
        isLast
        index={5}
        openedIndex={openedIndex}
        onClick={() => handleClick(5)}
        title="ğŸ’¼ æ¯æœˆæ¥è´µäººï¼ˆæ¯æœˆä¸€æ¬¡ï¼‰"
        content="æ”¾ç”Ÿä¸ä»…æ˜¯è§£æ•‘ç”Ÿå‘½ï¼Œæ›´æ˜¯åŸ¹å…»æ…ˆæ‚²å¿ƒï¼Œç§¯ç´¯ç¦æŠ¥ï¼Œå‡€åŒ–ä¸šéšœçš„æ®Šèƒœå–„è¡Œã€‚ä½›é™€æ•™å¯¼æˆ‘ä»¬ï¼Œä¸€åˆ‡ä¼—ç”Ÿçš†å…·ä½›æ€§ï¼Œçš†å¯æˆä½›ã€‚é€šè¿‡æ”¾ç”Ÿä¼šæˆ‘ä»¬è·µè¡Œä½›é™€çš„æ•™è¯²ï¼Œä¸ä¼—ç”Ÿç»“ä¸‹å–„ç¼˜ä¹Ÿä¸ºè‡ªèº«ç§¯ç´¯è§£è„±çš„èµ„ç²®æ”¾ç”Ÿç‰©å‘½éƒ½æ˜¯ç²¾å¿ƒæŒ‘é€‰ï¼Œç¡®ä¿å…¶å¥åº·å¹¶é€‚åˆæ”¾ç”Ÿç¯å¢ƒäººå‰æ—¥æ®Šèƒœï¼Œè¯šé‚€åæ–¹å–„ä¿¡ä¸€èµ·å‚ä¸æ”¾ç”Ÿä¸Šä¾›å…»ä¸‰å®ï¼Œä¸‹å¸ƒæ–½ä¸€åˆ‡ä¼—ç”Ÿï¼Œæ¶ˆé™¤ä¸€åˆ‡ä¸šéšœï¼Œå¢åŠ ä¸€åˆ‡å–„ç¼˜åŠŸå¾·ï¼Œæ‰€æ„¿çš†èƒ½æ»¡è¶³å¦‚æ„å¤ç¥¥äººäººäºº
ç¥ˆæ„¿:å¤©ä¸‹æ— ç¾ï¼Œï¼Œå¤§åœ°æ¸…å®ï¼Œå›½æ³°æ°‘å®‰ï¼Œé£è°ƒé›¨é¡ºï¼Œä¼—ç”Ÿçš†é—»ä½›æ³•ï¼Œæ·±æ©å¼€æ˜¾æ™ºæ…§ï¼Œç¦å¾·åœ†èï¼Œç¦æ…§åŒå¢ï¼Œç¦å»¶å­å­™äººäººäºº
å¦‚éœ€å‚ä¸æ”¾ç”Ÿä¼šä¼šä¼šè¿˜è¯·æå‰è”ç³»ç™»è®°â€¦.((æä¾›å§“å+æ„¿æœ›å›å‘)"
      />
    </div>
  );
};

const EventItem = ({
  index,
  openedIndex,
  title,
  content,
  onClick,
  isLast,
}: {
  index: number;
  openedIndex: number;
  title: string;
  content: string;
  onClick: () => void;
  isLast?: boolean;
}) => {
  const isOpen = openedIndex === index;

  return (
    <div className="w-full md:w-[620px] text-white relative py-2">
      {!isLast && (
        <div className="absolute w-[1px] top-[30px] -bottom-[30px] left-[18px] md:left-[20px] bg-[#FFFFFF33]" />
      )}

      <div
        className={
          "z-10 relative flex items-center py-4 justify-between cursor-pointer hover:bg-white/10 px-3 rounded-md"
        }
        onClick={onClick}
      >
        <div className="flex items-center gap-4 md:gap-[30px]">
          <div
            className={classNames(
              "w-3 h-3 md:w-4 md:h-4 rounded-full",
              isOpen
                ? "border-[2px] md:border-[3px] border-[#FBE791] bg-[#1E5B5D]"
                : "bg-[#6DA985]"
            )}
          />

          <div className="text-[20px] md:text-[24px] font-semibold">
            {title}
          </div>
        </div>

        <ChevronLeft
          strokeWidth={2}
          className={classNames(
            "w-5 md:w-5",
            isOpen ? "rotate-90" : "-rotate-90"
          )}
        />
      </div>

      {isOpen && (
        <div
          className={twMerge(
            "mt-1 pl-[42px] md:pl-[57px] pr-3"
            // !isOpen ? "h-0 overflow-hidden" : ""
          )}
        >
          <div className="text-[14px] md:text-[16px] font-medium opacity-80 leading-normal">
            {content}
          </div>

          <div className="mt-4 px-6 py-2.5 bg-[#FFF9E0] rounded-full clickable-effect text-black/80 font-medium text-[14px] md:text-[16px] inline-flex">
            ç«‹å³å‚åŠ 
          </div>
        </div>
      )}
    </div>
  );
};
